# 一、仿真环境配置

## 1.安装gazebo

```bash
# install some necessary tools:

sudo apt-get update
sudo apt-get install lsb-release gnupg

install Ignition Fortress:
sudo curl https://packages.osrfoundation.org/gazebo.gpg --output /usr/share/keyrings/pkgs-osrf-archive-keyring.gpg

echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/pkgs-osrf-archive-keyring.gpg] https://packages.osrfoundation.org/gazebo/ubuntu-stable $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/gazebo-stable.list > /dev/null

sudo apt-get update
sudo apt-get install ignition-fortress

（卸载：sudo apt remove ignition-fortress）

# 检查
ign gazebo --version
ign gazebo shapes.sdf -v 4
```


## 2.安装ROS2-Gazebo桥接包元包

```bash
sudo apt-get install ros-humble-ros-gz
```


## 3.安装ros2_control 框架与 Gazebo 的集成包

```bash
# ros2_control 框架
sudo apt install ros-humble-ros2-control
sudo apt install ros-humble-ros2-controllers

# Gazebo 的集成包
sudo apt install ros-humble-gz-ros2-control

# 验证
ros2 pkg list | grep -E "ros_gz|gz_ros2_control"
```


## 4.安装关节状态发布器

```bash
sudo apt install ros-humble-joint-state-publisher
```


## 5.（可选）安装 RQT 轨迹控制器

```bash
sudo apt install ros-humble-rqt ros-humble-rqt-common-plugins
sudo apt install ros-humble-rqt-joint-trajectory-controller
```


# 二、编译启动

```bash
# 编译：
cd ~/dev_ws
colcon build --packages-select robot_simulation
source install/setup.bash

# 启动：
ros2 launch robot_simulation gazebo.launch.py  config_file:=default_sim_config.yaml

# 默认配置文件：default_sim_config.yaml
# 配置文件相对路径：humanoid/config/
# 参数可缺省，缺省效果同上；参数可用绝对路径
```
